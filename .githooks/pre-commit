#!/usr/bin/env bash
set -euo pipefail
echo "Running Black, isort, and Flake8 on staged Python files..."

PY_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.py$' || true)
[ -z "${PY_FILES}" ] && exit 0

black ${PY_FILES} || exit 1
isort ${PY_FILES} || exit 1
flake8 ${PY_FILES} || true   # donâ€™t block commits on lint warnings

git add ${PY_FILES}           # re-stage any formatted files
exit 0                        # allow commit to proceed
